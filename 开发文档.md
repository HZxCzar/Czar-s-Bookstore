# 开发文档

## BookStore （Czar）

## 程序功能

### FileWriting

负责文件读写，read获取，write写入并返回写入位置。

### database

数据库处理模板，可以binarysearch单一元素，binarysearchUP和binarysearchBound获取范围元素头尾位置，BREAK支持裂块操作。数据索引与数据块分为两个文件（keyfile|valuefile）存储。以块状链表实现。

### Tool

包括字符串分割Tokenscanner功能，字符字符串转换功能

### Booksystem

负责图书管理系统，通过图书data维护一个图书database，自定义不同data比较方式，数据存储分为四个数据库，分别依照ISBN顺序|主BookName副ISBN顺序|主Author副ISBN顺序|主Keyword副ISBN顺序存储。支持requiremen各种操作。

### Accountsystem

负责账户系统，通过账户data维护一个账户database。

### LOGINsystem

管理登录栈，维护当前用户select操作以及权限等信息。

### Logsystem

负责日志系统，维护一个日志database

### Main

负责程序主要流程控制，检索输入指令通过各system进行指令执行

## 主体逻辑

针对用户输入指令由main中的tokenscanner确认指令类型，选择调用相应的system，一次指令操作中可能回修改多个数据库内容，登录以及select等过程中修改LOGINsystem信息。

## 代码结构

main为主函数，LOGINsystem在运行过程中一直使用，一同调用Book，Account，Log三个数据库内容，剩下FileWriting，Tool，database为内部实现机制，外部不访问。

## 文件存储

每个文件开头标注是否写入内容

* KeyFile剩下保存索引，标注对应数据块位置、首元素信息（用于查找）、下一索引坐标

* ValueFile剩下保存数据块，块内包含data数据元素，以及目前块内元素数量size

## 其他补充说明

待续...


